<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Folder Edit Page</title>
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/post.css">
</head>
<body>
<div class="wrap">
    <header>
        <div class="profile">
            <button class="optionBtn"><img src="/image/icon_option.png" alt="프로필 옵션 버튼"></button>
            <ul class="optionBox">
                <li><a>프로필 수정</a></li>
                <li><a>공유</a></li>
            </ul>
            <div class="profileStatus">
                <div class="prof_photo"><img src="/image/icon_no_image_lg.png" alt="프로필 사진"></div>
                <div class="prof_txt">
                    <strong>닉네임</strong>
                    <span>상태메시지</span>
                </div>
            </div>
            <div class="profileInfo">
                <span class="tissueCount">500</span>
                <button class="myBlogBtn btn">내 블로그</button>
            </div>
        </div>
        <nav>
            <ul class="rnb">
                <li><button>홈</button></li>
                <li><button>회원 정보</button></li>
                <li><button>결제 관리</button></li>
                <li><button>차단 목록</button></li>
                <li><button>관리기록 조회</button></li>
                <li><button>신고목록 조회</button></li>
                <li><button>회원정보 검색</button></li>
                <li class="logoutBtn"><button>로그아웃</button></li>
            </ul>
        </nav>
    </header>
    <main>
        <form class="title">
            <button class="backBtn"><img src="/image/btn_arrow.png" alt="뒤로가기 버튼"></button>
            <div>
                <h1>폴더 편집</h1>
            </div>
            <input class="search_input" type="text" placeholder="검색어를 입력하세요">
            <button class="searchBtn"><img src="/image/btn_search.png" alt="검색 버튼"></button>
            <button class="closeBtn"><img src="/image/btn_close.png" alt="닫기 버튼"></button>
            <div class="btnWrap">
                <button class="btn">완료</button>
            </div>
        </form>
        <section> <!-- 각자 개인 페이지들을 section 태그 안에 작성하세요. -->

<!--            <form action="">-->
                <div class="btnWrap">
                    <button class="addBtn btn gray">추가</button>
                    <button class="deleteBtn btn gray">삭제</button>
                </div>
                <ul class="fEditList">
                    <li class="fixed">전체목록 (<span>56</span>)</li>
                    <li>폴더 1의 폴더명</li>
                </ul>
                <dl>
                    <dt>폴더명</dt>
                    <dd>
                        <div class="txt">
                            <input id="folderName" type="text" readonly>
                            <em>* 폴더는 최대 10개 까지 추가 가능합니다.</em>
                        </div>
                    </dd>
                </dl>
<!--            </form>-->
            <script>
                const $addBtn = document.querySelector(".addBtn");
                const $delBtn = document.querySelector(".deleteBtn");
                const $fragment = document.createDocumentFragment();
                const $feList = document.querySelector(".fEditList")
                const fName = document.getElementById("folderName");

                $addBtn.addEventListener('click', () => {
                    const fNameValue = fName.value;
                    const $li = document.createElement("li");

                    if(!fNameValue) {
                        if(document.querySelectorAll(".fEditList li").length <= 10 ) {
                            removeActive()
                            $li.textContent = '폴더';
                            $fragment.appendChild($li)//.classList.add("active");
                            $feList.appendChild($fragment);
                        } else {
                            alert("웅 안대ㅎㅎㅎ 10개 넘었엉")
                        }
                    } else {
                        alert("미쳤음?? 공백임ㅇ")
                    }
                })

                $delBtn.addEventListener('click', function() {
                    const $feListActive = document.querySelector(".fEditList .active")

                        $feListActive.remove();
                        fName.removeAttribute("readonly");
                        fName.value = thisfName;
                        fName.focus();

                })

                $feList.addEventListener('click', function(e) {
                    let thisEl = e.target;
                    if(thisEl.tagName === "LI" && !thisEl.classList.contains("fixed")) {
                        removeActive();
                        let thisfName = thisEl.textContent;
                        thisEl.classList.add("active");
                        fName.removeAttribute("readonly");
                        fName.value = thisfName;
                        fName.focus();
                    }
                })

                // fName.addEventListener("blur", (e)=> {
                //     removeActive();
                //     fName.setAttribute("readonly", "readonly");
                //     fName.value = '';
                // })

                fName.addEventListener('input', () => {
                    console.log(fName.value);
                    document.querySelector(".fEditList .active").textContent = fName.value;
                })

                fName.addEventListener("keydown", (e) => {
                    if(e.key === "Enter") {
                        removeActive();
                        fName.setAttribute("readonly", "readonly");
                        fName.value = '';
                        fName.blur();
                    }
                })

                function removeActive() {
                    const $lis = document.querySelectorAll(".fEditList li");
                    $lis.forEach((li)=>{
                        li.classList.remove("active");
                    })
                }
            </script>
        </section>
    </main>
</div>
</body>
</html>