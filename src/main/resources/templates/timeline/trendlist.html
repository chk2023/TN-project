<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">>
<head>
    <meta charset="UTF-8">
    <title>Timeline - main</title>
    <link rel="stylesheet" href="/css/common.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
</head>
<body>
<script>
    let index = `[[${index}]]`;
    const range = `[[${range}]]`;
</script>
<div class="wrap">
    <header>
        <div class="profile">
            <button class="optionBtn"><img src="/image/icon_option.png" alt="프로필 옵션 버튼"></button>
            <ul class="optionBox">
                <li><a>프로필 수정</a></li>
                <li><a>공유</a></li>
            </ul>
            <div class="profileStatus">
                <div class="prof_photo"><img src="/image/icon_no_image_lg.png" alt="프로필 사진"></div>
                <div class="prof_txt">
                    <strong>닉네임</strong>
                    <span>상태메시지</span>
                </div>
            </div>
            <div class="profileInfo">
                <span class="tissueCount">500</span>
                <button class="myBlogBtn btn">내 블로그</button>
            </div>
        </div>
        <nav>
            <ul class="rnb">
                <li>
                    <button>홈</button>
                </li>
                <li>
                    <button>회원 정보</button>
                </li>
                <li>
                    <button>결제 관리</button>
                </li>
                <li>
                    <button>차단 목록</button>
                </li>
                <li>
                    <button>관리기록 조회</button>
                </li>
                <li>
                    <button>신고목록 조회</button>
                </li>
                <li>
                    <button>회원정보 검색</button>
                </li>
                <li>
                    <button onclick="update()">test:목록 더보기</button>
                </li>
                <li class="logoutBtn">
                    <button>로그아웃</button>
                </li>
            </ul>
        </nav>
    </header>
    <aside>
        <div class="folder">
            <strong class="minTit">폴더</strong>
            <ul>
                <li class="AllList"><a href="#"><img src="/image/icon_folder.png" alt="아이콘">전체목록(<span>56</span>)</a>
                </li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더1의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더2의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더3의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더4의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더5의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더6의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더7의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더8의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더9의 폴더명</a></li>
                <li><a href="#"><img src="/image/icon_folder.png" alt="아이콘">폴더10의 폴더명</a></li>
            </ul>
            <button class="folderSetBtn"><img src="/image/icon_folder_setting.png" alt="폴더 편집 버튼"></button>
        </div>
    </aside>
    <main>
        <form class="title">
            <button class="backBtn"><img src="/image/btn_arrow.png" alt="뒤로가기 버튼"></button>
            <div>
                <h1>Timeline - main</h1>
                <p><span>24. 03. 25</span></p>
            </div>
            <input class="search_input" type="text" placeholder="검색어를 입력하세요">
            <button class="searchBtn"><img src="/image/btn_search.png" alt="검색 버튼"></button>
            <button class="closeBtn"><img src="/image/btn_close.png" alt="닫기 버튼"></button>
        </form>
        <section> <!-- 각자 개인 페이지들을 section 태그 안에 작성하세요. -->
            <div class="mainProfile">
                <div class="mprofBackground">
                    <img src="/image/icon_no_image_lg.png" alt="사용자 설정 프로필 배경화면 사진">
                </div>
            </div>
            <ul class="tabMenu">
                <li class="active">
                    <button>인기글</button>
                </li>
                <li>
                    <button>최신글</button>
                </li>
                <li>
                    <button>추천글</button>
                </li>
                <li class="viewBtn">
                    <button><img src="/image/btn_view_type.png" alt="보기타입 선택버튼"></button>
                </li>
            </ul>

            <div style="padding: 20px">
                <ul class="blogList">
                    <li id="blogContents">
                        <div class="list_head">
                            <div class="prof_photo">
                                <!--                    <img src="/image/icon_default_profile.png" alt="프로필 사진">-->
                                <img src="https://cdn.inflearn.com/public/users/thumbnails/759418/09bcc1e5-b03d-46ed-8c6b-4aa283267e28"
                                     alt="프로필 사진" id="prof_photo">
                            </div>
                            <div>
                                <div>
                                    <strong class="blog_user_name" id="nickname">조한결</strong>
                                    <span class="blog_user_birth" id="wri_date">2월12일</span>
                                </div>
                                <span class="status_msg" id="status">오늘도 나는 눈물을 흘린다 또르륵오늘도 나는 눈물을 흘린다 또르륵오늘도 나는 눈물을 흘린다 또르륵</span>
                            </div>
                            <button class="optionBtn"><img src="/image/icon_option.png" alt="글 옵션 버튼"></button>
                            <ul class="optionBox">
                                <li><a>글 신고하기</a></li>
                                <li><a>글 관심없음</a></li>
                            </ul>
                        </div>
                        <div class="list_body">
                            <div>
                                <strong class="contentTit" id="title">글제목글제목글제목글제목글제목글제목글제목글제목글제목글제목글제목</strong>
                                <div class="contentsTxt" id="text">
                                    <p>
                                        본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글
                                        본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글
                                        본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글
                                        본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글
                                        본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글본문글
                                    </p>
                                </div>
                                <div class="showLikeAndComments">
                                    <button class="commentsBtn">
                                        <img src="/image/icon_comment.png" alt="댓글 버튼 아이콘">
                                        <span id="cmt_count">300</span>+
                                    </button>
                                    <button class="likeBtn active">
                                        <img src="/image/icon_like.png" alt="좋아요 버튼 아이콘">
                                        <span id="like_count">200</span>k
                                    </button>
                                </div>
                            </div>
                            <div class="thumbnailPhoto">
                                <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2F20160310_12%2Flee_h_i2_1457596672049c0vMY_JPEG%2Ftumblr_nxt9emqtjP1uh04bco1_540.jpg&type=sc960_832"
                                     alt="썸네일 이미지">
                            </div>
                        </div>
                    </li>
                </ul>
                <br><br>
            </div>
        </section>
    </main>
</div>
<script src="/js/timeline.js"></script>
<script id="blogTemplate" type="text/x-handlebars-template">
    {{#each this}}
    <div class="list_head">
        <div class="prof_photo">
            <!--                    <img src="/image/icon_default_profile.png" alt="프로필 사진">-->
            <img src="{{profile.profileImgPath}}" alt="프로필 사진">
        </div>
        <div>
            <div>
                <strong class="blog_user_name">{{profile.profileNickName}}</strong>
                <span class="blog_user_birth">{{postWriDate}}</span>
            </div>
            <span class="status_msg">{{profile.profileStatmsg}}</span>
        </div>
        <button class="optionBtn"><img src="/image/icon_option.png" alt="글 옵션 버튼"></button>
        <ul class="optionBox">
            <li><a>글 신고하기</a></li>
            <li><a>글 관심없음</a></li>
        </ul>
    </div>
    <div class="list_body">
        <div>
            <strong class="contentTit">{{postTitle}}</strong>
            <div class="contentsTxt">
                <p>
                    {{postText}}
                </p>
            </div>
            <div class="showLikeAndComments">
                <button class="commentsBtn">
                    <img src="/image/icon_comment.png" alt="댓글 버튼 아이콘">
                    <span>{{cmtCountStr}}</span>
                </button>
                <button class="likeBtn active">
                    <img src="/image/icon_like.png" alt="좋아요 버튼 아이콘">
                    <span>{{likeCountStr}}</span>
                </button>
            </div>
        </div>
        <div class="thumbnailPhoto">
            <img src="{{thumbnailPath}}" alt="썸네일 이미지">
        </div>
    </div>
    {{/each}}
</script>
<script>
    function update() {
        fetch('/timeline/trendUpdate')
            .then(res => res.json())
            .then(data => {
                console.log(data);
                var source = document.querySelector("#blogTemplate").innerHTML;
                var template = Handlebars.compile(source);
                var html = template(data);
                console.log(html);

                var element = document.createElement("li");
                element.innerHTML = html;
                document.querySelector(".blogList").appendChild(element);
            }).catch(error => console.error('Error fetching profile data:', error));
    }
</script>
</body>
</html>